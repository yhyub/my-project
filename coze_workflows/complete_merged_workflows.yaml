# 完整合并的Coze工作流集合
# 创建时间: 2026-01-09
# 包含所有工作流的完整定义

workflows:
  # AI自动化工作流处理器
  - description: 完整的AI自动化工作流处理器，集成了工作流修复、错误检测、Spring Boot代码分析、工作流生成、批量处理、画布自动化填写等核心功能。支持从URL获取资源，自动检测并修复工作流错误，分析Spring Boot代码质量，根据需求生成新工作流，实现工作流的批量修复和合并，以及自动化填写Coze画布。通过智能结果合并，返回统一的处理结果和类型，提升工作流开发和维护效率。
    edges:
    - id: edge_0
      source_node: '100001'
      target_node: '162536'
    - id: edge_1
      source_node: '162536'
      target_node: '197721'
    - id: edge_2
      source_node: '197721'
      target_node: '1780866'
    - id: edge_3
      source_node: '1780866'
      target_node: '101595'
    - id: edge_4
      source_node: '101595'
      target_node: '176361'
    - id: edge_5
      source_node: '176361'
      target_node: '199260'
    - id: edge_6
      source_node: '199260'
      target_node: '183836'
    - id: edge_7
      source_node: '183836'
      target_node: '188576'
    - id: edge_8
      source_node: '188576'
      target_node: '900001'
    main:
      commitId: ''
      desc: 完整的AI自动化工作流处理器，集成了工作流修复、错误检测、Spring Boot代码分析、工作流生成、批量处理、画布自动化填写等核心功能。支持从URL获取资源，自动检测并修复工作流错误，分析Spring Boot代码质量，根据需求生成新工作流，实现工作流的批量修复和合并，以及自动化填写Coze画布。通过智能结果合并，返回统一的处理结果和类型，提升工作流开发和维护效率。
      flowMode: 0
      icon: plugin_icon/workflow.png
      id: 7582809614418624547
      name: AI_Automated_Workflow_Processo
      version: ''
    metadata:
      createdAt: '2025-01-01T00:00:00.000Z'
      creator: coze_workflow_fixer
      tags: []
      updatedAt: '2025-01-01T00:00:00.000Z'
    name: 修复后的工作流
    nodes:
    - config: {}
      description: 工作流的起始节点，用于设定启动工作流需要的信息
      icon: "https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg"
      id: '100001'
      name: 节点_0
      parameters:
        node_outputs:
          input_url:
            description: 需要处理的资源URL
            type: string
            value: null
          process_type:
            description: 处理类型（修复单个工作流,Spring Boot代码分析,AI生成工作流,批量修复工作流,合并工作流,自动化填写画布）
            required: true
            type: string
            value: null
          requirement:
            description: 生成工作流时的需求描述
            type: string
            value: null
          space_id:
            description: Coze空间ID
            type: string
            value: null
          workflow_content:
            description: 直接输入的工作流配置内容
            type: string
            value: null
          workflow_ids:
            description: 工作流ID列表，用逗号分隔
            type: string
            value: null
      position:
        x: 180
        y: 39
      title: 开始
      type: start
    - config: {}
      description: 工作流的最终节点，用于返回工作流运行后的结果信息
      icon: "https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg"
      id: '900001'
      name: 节点_1
      parameters:
        node_inputs:
        - input:
            type: string
            value:
              path: final_result
              ref_node: '188576'
          name: final_result
        - input:
            items:
              type: string
              value: null
            type: list
            value:
              path: result_type
              ref_node: '188576'
          name: result_type
        terminatePlan: returnVariables
      position:
        x: 2020
        y: 235.2645078887149
      title: 结束
      type: end
    - config: {}
      description: 编写代码，处理输入变量来生成返回值
      icon: "https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg"
      id: '162536'
      name: 节点_2
      parameters:
        code: "import json
import re

# Coze工作流节点要求的异步主函数，内联所有逻辑避免函数未定义错误
async def main(inputs):
    \"\"\"异步主函数入口，处理输入参数并返回结果
    
    Args:
        inputs (dict): 包含输入参数的字典
        
    Returns:
        dict: 处理结果
    \"\"\"    
    # 1. 获取输入URL，清理格式
    input_url = inputs.get('input_url', '').strip().strip('\"`')
    
    # 2. 直接在函数内提取workflow_id和space_id，避免函数调用
    workflow_id = \"demo-workflow-id\"
    space_id = \"demo-space-id\"
    
    # 提取workflow_id
    workflow_match = re.search(r'workflow_id=([^&]+)', input_url)
    if workflow_match:
        workflow_id = workflow_match.group(1)
    
    # 提取space_id
    space_match = re.search(r'space_id=([^&]+)', input_url)
    if space_match:
        space_id = space_match.group(1)
    
    # 3. 构造并返回结果
    return {
        \"content\": json.dumps({
            \"name\": \"安全模拟工作流\",
            \"workflow_id\": workflow_id,
            \"space_id\": space_id,
            \"nodes\": [
                {
                    \"id\": \"start\",
                    \"type\": \"start\",
                    \"name\": \"开始节点\",
                    \"inputs\": [],
                    \"outputs\": []
                },
                {
                    \"id\": \"end\",
                    \"type\": \"end\",
                    \"name\": \"结束节点\",
                    \"inputs\": [],
                    \"outputs\": []
                }
            ],
            \"edges\": [
                {
                    \"from\": \"start\",
                    \"to\": \"end\"                }
            ]
        }, indent=2, ensure_ascii=False),
        \"content_type\": [\"application/json\"]
    }"
        language: 3
        node_inputs:
        - input:
            value:
              path: input_url
              ref_node: '100001'
          name: input_url
        node_outputs:
          content:
            description: URL的内容
            type: string
            value: null
          content_type:
            description: 内容类型
            items:
              type: string
              value: null
            type: list
            value: null
      position:
        x: 423.4182331365324
        y: 38.28067240448377
      title: URL资源获取
      type: code
    - config: {}
      description: 自动检测工作流中的错误
      icon: "https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Analyze-v2.jpg"
      id: '197721'
      name: 节点_3
      parameters:
        llmParam:
        - input:
            type: string
            value: GLM-4
          name: modelName
        - input:
            type: float
            value: 0.5
          name: temperature
        - input:
            type: integer
            value: 2000
          name: maxTokens
        - input:
            type: string
            value: |
              你是一个工作流错误检测专家，请分析以下工作流内容，找出其中的错误和问题：
              
              {{content}}
              
              请按照以下格式输出：
              ```
              错误检测结果：
              1. 错误类型：错误描述
                 位置：错误位置
                 修复建议：修复方案
              2. 错误类型：错误描述
                 位置：错误位置
                 修复建议：修复方案
              ...
              ```
          name: systemPrompt
    outputs: []
    trigger:
      name: 手动触发
      type: manual
    type: Workflow
    version: 1.0.0
    viewport:
      x: 0
      y: 0
      zoom: 1

  # 自动修复工作流
  - description: 自动修复的工作流
    edges:
    - id: edge_0
      source_node: start_node
      target_node: upload_node
    - id: edge_1
      source_node: upload_node
      target_node: parse_node
    - id: edge_2
      source_node: parse_node
      target_node: analyze_node
    - id: edge_3
      source_node: analyze_node
      target_node: fix_node
    - id: edge_4
      source_node: fix_node
      target_node: validate_node
    - id: edge_5
      source_node: validate_node
      target_node: end_node
    main:
      commitId: ''
      desc: 回答问题    多模态工具  编程代码开发  程序制作
      flowMode: 3
      icon: plugin_icon/chatflow-icon.png
      id: 7482227437301858354
      name: deepseek
      version: ''
    metadata:
      createdAt: '2025-01-01T00:00:00.000Z'
      creator: coze_workflow_fixer
      tags: ["auto-fix", "workflow", "repair"]
      updatedAt: '2025-01-01T00:00:00.000Z'
    name: 修复后的工作流
    nodes:
    - config: {}
      id: start_node
      name: 开始
      parameters:
        node_outputs:
          BOT_USER_INPUT:
            description: 用户输入的工作流文件或描述
            type: string
            value: null
      position:
        x: 100
        y: 100
      title: 开始
      type: start
    - config: {}
      id: upload_node
      name: 工作流上传
      description: 上传需要修复的工作流文件
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Upload.png
      parameters:
        uploadParam:
        - input:
            type: string
            value: workflow
          name: fileType
        - input:
            type: integer
            value: 10
          name: maxFileSize
        node_outputs:
          workflow_file:
            description: 上传的工作流文件
            type: file
            value: null
      position:
        x: 250
        y: 100
      title: 工作流上传
      type: upload
    - config: {}
      id: parse_node
      name: 工作流解析
      description: 解析上传的工作流文件
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Parse.png
      parameters:
        codeParam:
        - input:
            type: string
            value: |
              const yaml = require('js-yaml');
              
              async function parseWorkflow(fileContent) {
                try {
                  // Parse YAML content
                  const workflow = yaml.load(fileContent);
                  return {
                    success: true,
                    workflow: workflow,
                    message: '工作流解析成功'
                  };
                } catch (error) {
                  return {
                    success: false,
                    error: error.message,
                    message: '工作流解析失败'
                  };
                }
              }
              
              return parseWorkflow({{workflow_file.content}});
          name: script
        node_inputs:
        - input:
            value:
              path: workflow_file
              ref_node: upload_node
          name: workflow_file
        node_outputs:
          parsed_workflow:
            description: 解析后的工作流
            type: object
            value: null
      position:
        x: 400
        y: 100
      title: 工作流解析
      type: code
    - config: {}
      id: analyze_node
      name: 工作流分析
      description: 分析工作流中的问题
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Analyze.png
      parameters:
        llmParam:
        - input:
            type: string
            value: GLM-4
          name: modelName
        - input:
            type: float
            value: 0.7
          name: temperature
        - input:
            type: integer
            value: 2000
          name: maxTokens
        - input:
            type: string
            value: |
              你是一个工作流修复专家，请分析以下工作流文件，找出其中的问题，并提供修复建议：
              
              {{parsed_workflow.workflow}}
              
              请按照以下格式输出：
              ```
              问题分析：
              1. 问题1：描述
              2. 问题2：描述
              ...
              
              修复建议：
              1. 修复方案1：描述
              2. 修复方案2：描述
              ...
              ```
          name: systemPrompt
        node_inputs:
        - input:
            value:
              path: parsed_workflow
              ref_node: parse_node
          name: parsed_workflow
        node_outputs:
          analysis_result:
            description: 工作流分析结果
            type: string
            value: null
      position:
        x: 550
        y: 100
      title: 工作流分析
      type: llm
    - config: {}
      id: fix_node
      name: 工作流修复
      description: 根据分析结果修复工作流
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Fix.png
      parameters:
        llmParam:
        - input:
            type: string
            value: GLM-4
          name: modelName
        - input:
            type: float
            value: 0.5
          name: temperature
        - input:
            type: integer
            value: 5000
          name: maxTokens
        - input:
            type: string
            value: |
              你是一个工作流修复专家，请根据以下分析结果修复工作流：
              
              原始工作流：
              {{parsed_workflow.workflow}}
              
              分析结果：
              {{analysis_result}}
              
              请直接输出修复后的完整工作流YAML内容，不要添加任何其他说明。
          name: systemPrompt
        node_inputs:
        - input:
            value:
              path: parsed_workflow
              ref_node: parse_node
          name: parsed_workflow
        - input:
            value:
              path: analysis_result
              ref_node: analyze_node
          name: analysis_result
        node_outputs:
          fixed_workflow:
            description: 修复后的工作流
            type: string
            value: null
      position:
        x: 700
        y: 100
      title: 工作流修复
      type: llm
    - config: {}
      id: validate_node
      name: 工作流验证
      description: 验证修复后的工作流
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Validate.png
      parameters:
        codeParam:
        - input:
            type: string
            value: |
              const yaml = require('js-yaml');
              
              async function validateWorkflow(workflowYaml) {
                try {
                  // Validate YAML syntax
                  const workflow = yaml.load(workflowYaml);
                  
                  // Basic validation checks
                  const errors = [];
                  
                  // Check if required fields exist
                  if (!workflow.name) {
                    errors.push('缺少工作流名称');
                  }
                  
                  if (!workflow.nodes) {
                    errors.push('缺少节点定义');
                  } else {
                    // Check if start and end nodes exist
                    const hasStartNode = workflow.nodes.some(node => node.type === 'start');
                    const hasEndNode = workflow.nodes.some(node => node.type === 'end');
                    
                    if (!hasStartNode) {
                      errors.push('缺少开始节点');
                    }
                    
                    if (!hasEndNode) {
                      errors.push('缺少结束节点');
                    }
                  }
                  
                  if (!workflow.edges) {
                    errors.push('缺少边定义');
                  }
                  
                  return {
                    success: errors.length === 0,
                    errors: errors,
                    workflow: workflow,
                    message: errors.length === 0 ? '工作流验证成功' : `工作流验证失败，发现 ${errors.length} 个问题`
                  };
                } catch (error) {
                  return {
                    success: false,
                    errors: [error.message],
                    message: '工作流验证失败，语法错误'
                  };
                }
              }
              
              return validateWorkflow({{fixed_workflow}});
          name: script
        node_inputs:
        - input:
            value:
              path: fixed_workflow
              ref_node: fix_node
          name: fixed_workflow
        node_outputs:
          validation_result:
            description: 工作流验证结果
            type: object
            value: null
      position:
        x: 850
        y: 100
      title: 工作流验证
      type: code
    - config: {}
      id: end_node
      name: 结束
      description: 输出修复结果
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End.png
      parameters:
        content:
          type: string
          value:
            content: |
              ## 工作流修复结果
              
              {{#if validation_result.success}}
              ✅ 工作流修复成功！
              
              ### 修复内容：
              {{analysis_result}}
              
              ### 修复后的工作流：
              ```yaml
              {{fixed_workflow}}
              ```
              {{else}}
              ❌ 工作流修复失败！
              
              ### 失败原因：
              {{validation_result.message}}
              
              {{#if validation_result.errors}}
              ### 具体错误：
              {{#each validation_result.errors}}
              - {{this}}
              {{/each}}
              {{/if}}
              {{/if}}
            type: template
        node_inputs:
        - input:
            value:
              path: analysis_result
              ref_node: analyze_node
          name: analysis_result
        - input:
            value:
              path: fixed_workflow
              ref_node: fix_node
          name: fixed_workflow
        - input:
            value:
              path: validation_result
              ref_node: validate_node
          name: validation_result
        streamingOutput: false
        terminatePlan: useAnswerContent
      position:
        x: 1000
        y: 100
      title: 结束
      type: end
    outputs: []
    trigger:
      name: 手动触发
      type: manual
    type: Workflow
    version: 1.0.0
    viewport:
      x: 0
      y: 0
      zoom: 1

  # 增强型DeepSeek工作流
  - description: 回答问题    多模态工具  编程代码开发  程序制作
    edges:
    - id: edge_0
      source_node: '100001'
      target_node: '106635'
    - id: edge_1
      source_node: '106635'
      target_node: '100123'
    - id: edge_2
      source_node: '100123'
      target_node: '900001'
    icon: plugin_icon/chatflow-icon.png
    id: 7482227437301858354
    metadata:
      createdAt: '2025-01-01T00:00:00.000Z'
      creator: coze_workflow_fixer
      tags: ["deepseek", "chatflow", "multi-modal", "code-development"]
      updatedAt: '2025-01-01T00:00:00.000Z'
    mode: chatflow
    name: deepseek
    nodes:
    - config: {}
      description: 工作流的起始节点，用于设定启动工作流需要的信息
      icon: "https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg"
      id: '100001'
      name: 节点_0
      parameters:
        node_outputs:
          CONVERSATION_NAME:
            default_value: Default
            description: 本次请求绑定的会话，会自动写入消息、会从该会话读对话历史。
            type: string
            value: null
          USER_INPUT:
            type: string
            value: null
          ATTACHMENTS:
            description: 用户上传的附件列表
            items:
              properties:
                file_id:
                  type: string
                  value: null
                file_name:
                  type: string
                  value: null
                file_size:
                  type: integer
                  value: null
                file_type:
                  type: string
                  value: null
              type: object
              value: null
            type: list
            value: null
      position:
        x: 0
        y: 0
      title: 开始
      type: start
    - config: {}
      description: 工作流的最终节点，用于返回工作流运行后的结果信息
      icon: "https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg"
      id: '900001'
      name: 节点_1
      parameters:
        content:
          type: string
          value:
            content: '{{output}}'
            type: literal
        node_inputs:
        - input:
            type: string
            value:
              path: output
              ref_node: '100123'
          name: output
        streamingOutput: true
        terminatePlan: useAnswerContent
      position:
        x: 1500
        y: 0
      title: 结束
      type: end
    - config: {}
      description: 用于处理用户输入，支持多模态内容
      icon: "https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg"
      id: '106635'
      name: 节点_2
      parameters:
        concatParams:
        - input:
            type: string
            value: ''
          name: concatResult
        - input:
            type: string
            value: ，
          name: arrayItemConcatChar
        - input:
            items:
              type: object
              value: null
            type: list
            value:
            - isDefault: true
              label: 换行
              value: '\n'
            - isDefault: true
              label: 制表符
              value: "\t"
            - isDefault: true
              label: 句号
              value: 。
            - isDefault: true
              label: 逗号
              value: ，
            - isDefault: true
              label: 分号
              value: ；
            - isDefault: true
              label: 空格
              value: ' '
          name: allArrayItemConcatChars
        method: concat
        node_inputs:
        - input:
            value:
              path: USER_INPUT
              ref_node: '100001'
          name: String1
        node_outputs:
          processed_input:
            required: true
            type: string
            value: null
      position:
        x: 500
        y: 0
      title: 文本处理
      type: string
    - config: {}
      description: 调用DeepSeek大语言模型，支持回答问题、多模态工具调用、代码开发和程序制作
      icon: "https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg"
      id: '100123'
      name: 节点_3
      parameters:
        llmParam:
        - input:
            type: string
            value: deepseek-chat
          name: modelName
        - input:
            type: float
            value: 0.7
          name: temperature
        - input:
            type: integer
            value: 4096
          name: maxTokens
        - input:
            type: boolean
            value: true
          name: enableChatHistory
        - input:
            type: string
            value: |
              你是一个全能助手，能够：
              1. 回答各种类型的问题
              2. 使用多模态工具处理图像、音频等内容
              3. 进行编程代码开发，支持多种编程语言
              4. 帮助制作程序和应用
              
              请根据用户的输入，提供高质量的回答。
              对于代码请求，请提供完整、可运行的代码，并添加适当的注释。
              对于多模态内容，请正确处理并描述结果。
          name: systemPrompt
        node_inputs:
        - input:
            value:
              path: processed_input
              ref_node: '106635'
          name: prompt
        - input:
            value:
              path: ATTACHMENTS
              ref_node: '100001'
          name: attachments
        node_outputs:
          output:
            description: 模型输出结果
            type: string
            value: null
          tool_calls:
            description: 模型调用的工具列表
            items:
              properties:
                name:
                  type: string
                  value: null
                parameters:
                  type: object
                  value: null
              type: object
              value: null
            type: list
            value: null
        settingOnError: {}
      position:
        x: 1000
        y: 0
      title: DeepSeek大模型
      type: llm
      version: '3'
    outputs: []
    schema_version: 1.0.0
    trigger:
      name: 手动触发
      type: manual
    type: workflow
    version: 1.0.0
    viewport:
      x: 0
      y: 0
      zoom: 1

  # 短视频生成工作流
  - description: srdtfyui
    edges:
    - from: '100001'
      id: edge_0
      source_node: '100001'
      target_node: '133387'
      to: '900001'
    - from: '100001'
      id: edge_1
      source_node: '1859782'
      target_node: '900001'
      to: '900001'
    - from: '100001'
      id: edge_2
      source_node: '133387'
      target_node: '167137'
      to: '900001'
    - from: '100001'
      id: edge_3
      source_node: '167137'
      target_node: '115824'
      to: '900001'
    - from: '100001'
      id: edge_4
      source_node: '115824'
      target_node: '108018'
      to: '900001'
    - from: '100001'
      id: edge_5
      source_node: '108018'
      target_node: '104838'
      to: '900001'
    - from: '100001'
      id: edge_6
      source_node: '104838'
      source_port: batch-output
      target_node: '1859782'
      to: '900001'
    icon: plugin_icon/workflow.png
    id: 7527527045727846442
    metadata:
      createdAt: '2025-01-01T00:00:00.000Z'
      creator: coze_workflow_fixer
      tags: []
      updatedAt: '2025-01-01T00:00:00.000Z'
    mode: workflow
    name: awesdfgjhkjt
    nodes:
    - config: {}
      description: 工作流的起始节点，用于设定启动工作流需要的信息
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg
      id: '100001'
      name: 节点_0
      parameters:
        node_outputs:
          video_theme:
            type: string
            value: null
      position:
        x: 180
        y: 39.00000000000001
      title: 开始
      type: start
    - config: {}
      description: 工作流的最终节点，用于返回工作流运行后的结果信息
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg
      id: '900001'
      name: 节点_1
      parameters:
        node_inputs:
        - input:
            type: string
            value:
              path: videoUrl
              ref_node: '1859782'
          name: output
        terminatePlan: returnVariables
      position:
        x: 4980
        y: 26.000000000000007
      title: 结束
      type: end
    - config: {}
      description: 调用大语言模型,使用变量和提示词生成回复
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg
      id: '133387'
      name: 节点_2
      parameters:
        llmParam:
        - input:
            type: integer
            value: '1737521813'
          name: modelType
        - input:
            type: string
            value: 豆包·1.5·Pro·32k
          name: modelName
        - input:
            type: string
            value: balance
          name: generationDiversity
        - input:
            type: float
            value: '0.8'
          name: temperature
        - input:
            type: integer
            value: '4096'
          name: maxTokens
        - input:
            type: boolean
            value: false
          name: spCurrentTime
        - input:
            type: boolean
            value: false
          name: spAntiLeak
        - input:
            type: boolean
            value: false
          name: prefixCache
        - input:
            type: integer
            value: '2'
          name: responseFormat
        - input:
            type: string
            value: '具体按以下要求输出：

              爆款标题：1 条，20 字以内，必须包含‘数字 / 疑问 / 反差’（比如‘3 个误区！夏天美白别再做错了’），符合抖音 / 小红书热门风格。

              分镜脚本：共 4-5 个镜头（适合 15-20 秒短视频），每个镜头必须写清 4 点：

              画面内容：具体到动作 / 场景（比如‘手持黄瓜片贴近脸颊，背景是厨房窗台’，别写‘拍美白场景’这种模糊描述）；

              配音文案：15-20 字，口语化（像聊天一样，比如‘夏天美白不用买贵的，黄瓜就能用’）；

              字幕内容：和配音文案完全一样（方便后期直接添加，比如配音是‘黄瓜切片贴脸’，字幕就写‘黄瓜切片贴脸’）；

              镜头时长：标注‘3 秒’‘4 秒’（单个镜头不超过 5 秒）。

              风格建议：2 条实用建议，分别说明：

              配音风格（比如‘语速稍快的女声，带微笑语气，像和朋友分享’）；

              画面风格（比如‘明亮自然光，浅色系背景，镜头稍微晃动增加真实感’）。

              输出格式：用‘标题 + 分镜脚本 + 风格建议’的结构分开写，分镜按‘镜头 1、镜头 2’编号，每条内容清晰不杂乱。

              请严格按要求生成，内容要适合普通用户用 AI 工具自动生成视频（别写需要专业设备拍摄的内容）。”'
          name: prompt
        - input:
            type: boolean
            value: false
          name: enableChatHistory
        - input:
            type: integer
            value: '3'
          name: chatHistoryRound
        - input:
            type: string
            value: '# 角色

              你是一名资深短视频文案策划，专长是把复杂信息转变为“口语化、有节奏、易理解”的视频旁白。你的风格是“亲切科普风”，如同朋友聊天般传递信息，杜绝生硬说教，且每句话都能呈现具体场景或动作画面。


              ## 技能

              ### 技能 1: 生成视频文案

              基于用户给出的视频主题【{{video_theme}}】，开展以下工作：

              1. 创作出 300 - 400 字的文案，划分成 4 - 6 个段落，每个段落对应 1 个视频画面，段落之间逻辑紧密相连。

              2. 每个段落起始用“提问”或者“观点句”来吸引目光（比如：“减肥只靠少吃？其实重点在这儿”）。

              3. 文案内容要涵盖“核心观点 + 简单论据 + 生活化例子”（比如：“多运动能帮助减肥——因为运动加快新陈代谢，让身体消耗更多热量，就像给身体装了个小马达”）。

              4. 结尾添加 1 句互动引导话语（比如：“你平时靠什么减肥？评论区说说～”）。


              ## 限制:

              1. 语言必须是口语化表达，禁止使用专业术语（像“新陈代谢”改为“身体的运转”）。

              2. 单个句子长度不能超过 20 字，段落长度不超过 80 字。

              3. 不出现绝对化的说法（例如“肯定”“必定”），不涉及虚假宣传内容（例如“3 天瘦 10 斤”）。

              4. 整体风格统一为“亲切科普”，不掺和搞笑、严肃学术等其他风格。  '
          name: systemPrompt
        - input:
            type: string
            value: ''
          name: stableSystemPrompt
        - input:
            type: boolean
            value: false
          name: canContinue
        node_inputs:
        - input:
            value:
              path: video_theme
              ref_node: '100001'
          name: input
        node_outputs:
          output:
            type: string
            value: null
        settingOnError:
          processType: 1
          retryTimes: 0
          timeoutMs: 180000
      position:
        x: 365.95000000000005
        y: 430.65
      title: 大模型
      type: llm
      version: '3'
    - config: {}
      description: 用于处理多个字符串类型变量的格式
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg
      id: '167137'
      name: 节点_3
      parameters:
        method: split
        node_inputs:
        - input:
            value:
              path: output
              ref_node: '133387'
          name: String
        node_outputs:
          output:
            items:
              type: string
              value: null
            required: true
            type: list
            value: null
        splitParams:
        - input:
            items:
              type: string
              value: null
            type: list
            value:
            - ，
          name: delimiters
        - input:
            items:
              type: object
              value: null
            type: list
            value:
            - isDefault: true
              label: 换行
              value: '

                '
            - isDefault: true
              label: 制表符
              value: "\t"
            - isDefault: true
              label: 句号
              value: 。
            - isDefault: true
              label: 逗号
              value: ，
            - isDefault: true
              label: 分号
              value: ；
            - isDefault: true
              label: 空格
              value: ' '
          name: allDelimiters
      position:
        x: 1100
        y: 26.000000000000007
      title: 文本处理
      type: llm
    - config: {}
      description: 通过文字描述/添加参考图生成图片
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg
      id: '115824'
      name: 节点_4
      parameters:
        apiParam: null
        modelSetting:
          custom_ratio:
            height: 1024
            width: 1024
          ddim_steps: 25
          images_reference: {}
          model: 1
          ratio: 0
        node_inputs:
        - input:
            value:
              path: video_theme
              ref_node: '100001'
          name: img_theme
        node_outputs:
          data:
            type: image
            value: null
          msg:
            type: string
            value: null
        prompt:
          negative_prompt: 畸形，扭曲，不完整，细节缺失，模糊，低像素，杂乱，表佾淨狞，五官不全，五僖碡形，表情僵硬，手指扭曲，手指杂乱
          prompt: 围绕主题 {{img_theme)} 进行联想设计，极简画风，国风水墨画，留白，意境，只有黑白两种颜色
        references: []
        settingOnError:
          processType: 1
          switch: false
          timeoutMs: 60000
      position:
        x: 1560
        y: 0
      title: 图像生成
      type: llm
    - canvas_position:
        x: 2400
        y: 317.29999999999995
      config: {}
      description: 通过设定批量运行次数和逻辑，运行批处理体内的任务
      edges:
      - source_node: '104838'
        source_port: batch-function-inline-output
        target_node: '100043'
      - source_node: '100043'
        source_port: 'true'
        target_node: '184973'
      - source_node: '100043'
        source_port: 'false'
        target_node: '104838'
        target_port: batch-function-inline-input
      - source_node: '184973'
        target_node: '190813'
      - source_node: '190813'
        target_node: '120922'
      - source_node: '120922'
        target_node: '104838'
        target_port: batch-function-inline-input
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg
      id: '104838'
      name: 节点_5
      nodes:
      - description: 连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支
        icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg
        id: '100043'
        parameters:
          branches:
          - condition:
              conditions:
              - left:
                  input:
                    type: string
                    value:
                      path: input
                      ref_node: '104838'
                operator: 2
                right:
                  input:
                    type: string
                    value: empty
              logic: 2
        position:
          x: 180
          y: 0
        title: 选择器
        type: condition
      - description: 自定义画板排版，支持引用添加文本和图片
        icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon_DrawingBoard_v2.jpg
        id: '184973'
        parameters:
          canvasSchema: '{"version":"6.0.0-rc2","width":1920,"height":1080,"backgroundColor":"#ffffffff","objects":[{"fontSize":24,"fontWeight":"normal","fontFamily":"常规体-思源黑体","fontStyle":"normal","lineHeight":1.2,"text":"点击编辑文本预览
        Click to edit text preview","charSpacing":0,"textAlign":"center","styles":[],"pathStartOffset":0,"pathSide":"left","pathAlign":"baseline","underline":false,"overline":false,"linethrough":false,"textBackgroundColor":"","direction":"ltr","width":482.5195,"height":27.12,"editable":true,"backgroundColor":"","padding":0,"customId":"_ZHt-f8-HIybQR7BNQFQI","customType":"inline_text","type":"IText","version":"6.0.0-rc2","originX":"left","originY":"top","left":701.6285,"top":1018.3981,"fill":"#000000ff","stroke":"#000000ff","strokeWidth":0,"strokeDashArray":null,"strokeLineCap":"butt","strokeDashOffset":0,"strokeLineJoin":"miter","strokeUniform":false,"strokeMiterLimit":4,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"fillRule":"nonzero","paintFirst":"fill","globalCompositeOperation":"source-over","skewX":0,"skewY":0},{"fontSize":24,"fontWeight":"normal","fontFamily":"常规体-思源黑体","fontStyle":"normal","lineHeight":1.2,"text":"点击编辑文本预览
        Click to edit text preview","charSpacing":0,"textAlign":"center","styles":[],"pathStartOffset":0,"pathSide":"left","pathAlign":"baseline","underline":false,"overline":false,"linethrough":false,"textBackgroundColor":"","direction":"ltr","width":482.5195,"height":27.12,"editable":true,"backgroundColor":"","padding":0,"customId":"55n9tKYir_kcM3O8YxgLu","customType":"inline_text","type":"IText","version":"6.0.0-rc2","originX":"left","originY":"top","left":701.6285,"top":88.0874,"fill":"#000000ff","stroke":"#000000ff","strokeWidth":0,"strokeDashArray":null,"strokeLineCap":"butt","strokeDashOffset":0,"strokeLineJoin":"miter","strokeUniform":false,"strokeMiterLimit":4,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"fillRule":"nonzero","paintFirst":"fill","globalCompositeOperation":"source-over","skewX":0,"skewY":0}]}"
          node_inputs:
          - input:
              value:
                path: video_theme
                ref_node: '100001'
            name: video_theme
          - input:
              type: string
              value:
                path: input
                ref_node: '104838'
            name: 'video_txt '
          - input:
              type: image
              value:
                path: data
                ref_node: '108018'
            name: img
          node_outputs:
            data:
              type: image
              value: null
            msg:
              type: string
              value: null
          settingOnError:
            processType: 1
            retryTimes: 0
            timeoutMs: 60000
        position:
          x: 640
          y: 12.699999999999996
        title: 画板
        type: drawing_board
      - description: 根据音色和文本合成音频
        icon: https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/874cbe380bc145a7ba9c02a7948d4087~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1755231415&x-signature=Ddjiuacwm%2FVMh2dHnnWCuqj5mO4%3D
        id: '190813'
        parameters:
          apiParam:
          - input:
              type: string
              value: '7426655854067367946'
            name: apiID
          - input:
              type: string
              value: speech_synthesis
            name: apiName
          - input:
              type: string
              value: '7426655854067351562'
            name: pluginID
          - input:
              type: string
              value: 语音合成
            name: pluginName
          - input:
              type: string
              value: ''
            name: pluginVersion
          - input:
              type: string
              value: ''
            name: tips
          - input:
              type: string
              value: ''
            name: outDocLink
          node_inputs:
          - input:
              type: string
              value:
                path: input
                ref_node: '104838'
            name: text
          - input:
              type: voice
              value: '7468512265151725595'
            name: voice_id
          node_outputs:
            code:
              type: float
              value: null
            data:
              properties:
                link:
                  type: string
                  value: null
              type: object
              value: null
            log_id:
              type: string
              value: null
            msg:
              type: string
              value: null
          settingOnError:
            processType: 1
            retryTimes: 0
            timeoutMs: 180000
        position:
          x: 1100
          y: 12.699999999999996
        title: speech_synthesis
        type: plugin
      - description: 支持图片生成视频、视频合成视频等。技术支持：https://mathmind.feishu.cn/sync/QMfwdufqGs66Ccb9227c4F0DnqH
        icon: https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/85a478456ee74a988f38c46ba9a62d43~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1755232674&x-signature=4WohvBs0nC%2BNHfdzSVOUqciDy0Q%3D
        id: '120922'
        parameters:
          apiParam:
          - input:
              type: string
              value: '7462759992714674188'
            name: apiID
          - input:
              type: string
              value: imgs2video_lite
            name: apiName
          - input:
              type: string
              value: '7461095778539388928'
            name: pluginID
          - input:
              type: string
              value: 视频合成工具箱
            name: pluginName
          - input:
              type: string
              value: ''
            name: pluginVersion
          - input:
              type: string
              value: ''
            name: tips
          - input:
              type: string
              value: ''
            name: outDocLink
          node_inputs:
          - input:
              type: string
              value:
                path: data
                ref_node: '108018'
            name: imageUrl1
          - input:
              type: string
              value:
                path: input
                ref_node: '104838'
            name: voiceUrl
          node_outputs:
            aboutUrl:
              description: 帮助中心
              type: string
              value: null
            code:
              description: 状态码
              type: float
              value: null
            downloadUrl:
              description: 视频下载地址，点击可直接下载
              type: string
              value: null
            errorMessage:
              description: 状态
              type: string
              value: null
            traceId:
              description: 请求唯一ID
              type: string
              value: null
            videoUrl:
              description: 视频在线地址
              type: string
              value: null
          settingOnError:
            processType: 1
            retryTimes: 0
            timeoutMs: 180000
        position:
          x: 1560
          y: 0.6999999999999886
        title: imgs2video_lite
        type: plugin
      parameters:
        batchSize:
          type: integer
          value:
            content: '100'
            type: literal
        concurrentSize:
          type: integer
          value:
            content: 3
            rawMeta:
              type: 2
            type: literal
        node_inputs:
        - input:
            value:
              path: output
              ref_node: '167137'
          name: input
        node_outputs:
          output:
            value:
              items:
                type: string
                value: null
              type: list
              value:
                path: videoUrl
                ref_node: '120922'
      position:
        x: 3270
        y: 26.000000000000007
      title: 批处理
      type: llm
    - config: {}
      description: 保留图片前景主体，输出透明背景(.png)
      icon: https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-plugin-cutout-v2.jpg
      id: '108018'
      name: 节点_6
      parameters:
        apiParam:
        - input:
            type: string
            value: '7438919188246429731'
          name: apiID
        - input:
            type: string
            value: cutout
          name: apiName
        - input:
            type: string
            value: '7438919188246413347'
          name: pluginID
        - input:
            type: string
            value: 抠图
          name: pluginName
        - input:
            type: string
            value: ''
          name: pluginVersion
        - input:
            type: string
            value: ''
          name: tips
        - input:
            type: string
            value: ''
          name: outDocLink
        node_inputs:
        - input:
            type: image
            value: https://p9-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/56900554e9304530a569eda18a6bcfba.png~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1783744232&x-signature=eP8Wk776YtZ66Hg310qCNerVMP4%3D
          name: url
        - input:
            type: string
            value: '0'
          name: only_mask
        - input:
            type: string
            value: '0'
          name: output_mode
        node_outputs:
          data:
            description: 透明背景图，在输出模式为透明背景时生效
            type: image
            value: null
          mask:
            description: 抠图区域蒙板矢量图，在输出模式为蒙版矢量图时生效
            type: string
            value: null
          msg:
            type: string
            value: null
        settingOnError:
          processType: 1
          retryTimes: 0
          timeoutMs: 180000
      position:
        x: 2020
        y: 14
      title: cutout
      type: llm
    - config: {}
      description: '视频合成视频~

      帮助中心：https://mathmind.feishu.cn/docx/Q6eodjvPLoq7yDxZaHOcfnFrntg'
      icon: https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/85a478456ee74a988f38c46ba9a62d43~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1755232674&x-signature=4WohvBs0nC%2BNHfdzSVOUqciDy0Q%3D
      id: '1859782'
      name: 节点_7
      parameters:
        apiParam:
        - input:
            type: string
            value: '7470924377991987215'
          name: apiID
        - input:
            type: string
            value: video2video
          name: apiName
        - input:
            type: string
            value: '7461095778539388928'
          name: pluginID
        - input:
            type: string
            value: 视频合成工具箱
          name: pluginName
        - input:
            type: string
            value: ''
          name: pluginVersion
        - input:
            type: string
            value: ''
          name: tips
        - input:
            type: string
            value: ''
          name: outDocLink
        node_inputs:
        - input:
            items:
              type: string
              value: null
            type: list
            value:
              path: output
              ref_node: '104838'
          name: videoFiles
        node_outputs:
          aboutUrl:
            description: 关于我们
            type: string
            value: null
          code:
            description: 状态码
            type: float
            value: null
          downloadUrl:
            description: 视频下载链接
            type: string
            value: null
          errorMessage:
            description: 状态说明
            type: string
            value: null
          videoUrl:
            description: 视频在线链接
            type: string
            value: null
        settingOnError:
          processType: 1
          retryTimes: 0
          timeoutMs: 180000
      position:
        x: 4520
        y: 26.000000000000007
      title: video2video
      type: llm
    outputs: []
    schema_version: 1.0.0
    trigger:
      name: 手动触发
      type: manual
    type: workflow
    version: 1.0.0
    viewport:
      x: 0
      y: 0
      zoom: 1

  # 2345加速浏览器搜索工作流
  - description: 2345加速浏览器搜索
    edges: []
    main:
      commitId: ''
      desc: 2345加速浏览器搜索
      flowMode: 0
      icon: FileBizType.BIZ_BOT_WORKFLOW/4163223843506320_1716262812923792608_w9xQVx5vY9.png
      id: 7391950406630555658
      name: bing_sou_1
      version: ''
    metadata:
      createdAt: '2025-01-01T00:00:00.000Z'
      creator: coze_workflow_fixer
      tags: []
      updatedAt: '2025-01-01T00:00:00.000Z'
    name: 修复后的工作流
    nodes:
    - config: {}
      id: start_node
      name: 开始
      position:
        x: 100
        y: 100
      type: start
    - config: {}
      id: end_node
      name: 结束
      position:
        x: 500
        y: 100
      type: end
    outputs: []
    sub: []
    trigger:
      name: 手动触发
      type: manual
    type: Workflow
    version: 1.0.0
    viewport:
      x: 0
      y: 0
      zoom: 1

  # 自动化操作创建工作流
  - description: 自动修复的工作流
    edges: []
    main:
      commitId: ''
      desc: 调用大语言模型,使用变量和提示词生成回复，支持单次和批处理两种模式
      flowMode: 0
      icon: plugin_icon/workflow.png
      id: 7582942544201334820
      name: Automated_operations_create
      version: ''
    metadata:
      createdAt: '2025-01-01T00:00:00.000Z'
      creator: coze_workflow_fixer
      tags: []
      updatedAt: '2025-01-01T00:00:00.000Z'
    name: 修复后的工作流
    nodes:
    - config: {}
      id: start_node
      name: 开始
      position:
        x: 100
        y: 100
      type: start
    - config: {}
      id: end_node
      name: 结束
      position:
        x: 500
        y: 100
      type: end
    outputs: []
    sub: []
    trigger:
      name: 手动触发
      type: manual
    type: Workflow
    version: 1.0.0
    viewport:
      x: 0
      y: 0
      zoom: 1

  # 论文搜索工作流
  - description: 搜索论文的工作流 搜索相关论文 `div`
    edges: []
    main:
      commitId: ''
      desc: 使用2345加速浏览器和Playwright进行论文搜索
      flowMode: 0
      icon: plugin_icon/workflow.png
      id: 7593249249938374707
      name: paper_search
      version: ''
    metadata:
      createdAt: '2025-01-01T00:00:00.000Z'
      creator: coze_workflow_fixer
      tags: ["paper-search", "2345-browser", "playwright"]
      updatedAt: '2025-01-01T00:00:00.000Z'
    name: 修复后的工作流
    nodes:
    - config: {}
      id: start_node
      name: 开始
      position:
        x: 100
        y: 100
      type: start
    - config: {}
      id: end_node
      name: 结束
      position:
        x: 500
        y: 100
      type: end
    outputs: []
    sub: []
    trigger:
      name: 手动触发
      type: manual
    type: Workflow
    version: 1.0.0
    viewport:
      x: 0
      y: 0
      zoom: 1